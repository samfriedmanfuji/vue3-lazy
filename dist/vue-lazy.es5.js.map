{"version":3,"file":"vue-lazy.es5.js","sources":["../src/types/index.ts","../src/helpers/dom.ts","../src/helpers/loadImage.ts","../src/helpers/debug.ts","../src/core/imageManager.ts","../src/helpers/util.ts","../src/core/lazy.ts","../src/index.ts"],"sourcesContent":["export enum State {\r\n  loading,\r\n  loaded,\r\n  error\r\n}\r\n\r\nexport interface LazyOptions {\r\n  error?: string\r\n  loading?: string\r\n}\r\n\r\nexport interface ImageManagerOptions {\r\n  el: HTMLElement\r\n  parent: HTMLElement | Window\r\n  src: string\r\n  error: string\r\n  loading: string\r\n  cache: Set<string>\r\n}\r\n\r\nexport interface Target {\r\n  el: HTMLElement | Window\r\n  ref: number\r\n}\r\n\r\n","const inBrowser = typeof window !== 'undefined'\r\n\r\nexport const hasIntersectionObserver = checkIntersectionObserver()\r\n\r\nfunction checkIntersectionObserver (): boolean {\r\n  if (inBrowser &&\r\n    'IntersectionObserver' in window &&\r\n    'IntersectionObserverEntry' in window &&\r\n    'intersectionRatio' in IntersectionObserverEntry.prototype) {\r\n    // Minimal polyfill for Edge 15's lack of `isIntersecting`\r\n    // See: https://github.com/w3c/IntersectionObserver/issues/211\r\n    if (!('isIntersecting' in IntersectionObserverEntry.prototype)) {\r\n      Object.defineProperty(IntersectionObserverEntry.prototype,\r\n        'isIntersecting', {\r\n          get: function (this: IntersectionObserverEntry) {\r\n            return this.intersectionRatio > 0\r\n          }\r\n        })\r\n    }\r\n    return true\r\n  }\r\n  return false\r\n}\r\n\r\nconst style = (el: HTMLElement, prop: string): string => {\r\n  return getComputedStyle(el).getPropertyValue(prop)\r\n}\r\n\r\nconst overflow = (el: HTMLElement): string => {\r\n  return style(el, 'overflow') + style(el, 'overflow-y') + style(el, 'overflow-x')\r\n}\r\n\r\nexport function scrollParent (el: HTMLElement): HTMLElement | Window {\r\n  let parent = el\r\n\r\n  while (parent) {\r\n    if (parent === document.body || parent === document.documentElement) {\r\n      break\r\n    }\r\n\r\n    if (!parent.parentNode) {\r\n      break\r\n    }\r\n\r\n    if (/(scroll|auto)/.test(overflow(parent))) {\r\n      return parent\r\n    }\r\n\r\n    parent = parent.parentNode as HTMLElement\r\n  }\r\n\r\n  return window\r\n}\r\n","export default function loadImage (src: string): Promise<any> {\r\n  return new Promise((resolve, reject) => {\r\n    const image = new Image()\r\n\r\n    image.onload = function () {\r\n      resolve()\r\n      dispose()\r\n    }\r\n\r\n    image.onerror = function (e) {\r\n      reject(e)\r\n      dispose()\r\n    }\r\n\r\n    image.src = src\r\n\r\n    function dispose () {\r\n      image.onload = image.onerror = null\r\n    }\r\n  })\r\n}\r\n","export function warn (msg: string): void {\r\n  console.warn(`[Vue3-lazy warn]: ${msg}`)\r\n}\r\n","import { ImageManagerOptions, State } from '../types'\r\nimport loadImage from '../helpers/loadImage'\r\nimport { warn } from '../helpers/debug'\r\n\r\nexport default class ImageManager {\r\n  el: HTMLElement\r\n  parent: HTMLElement | Window\r\n  src: string\r\n  error: string\r\n  loading: string\r\n  cache: Set<string>\r\n  state: State\r\n\r\n  constructor (options: ImageManagerOptions) {\r\n    this.el = options.el\r\n    this.parent = options.parent\r\n    this.src = options.src\r\n    this.error = options.error\r\n    this.loading = options.loading\r\n    this.cache = options.cache\r\n    this.state = State.loading\r\n\r\n    this.render(this.loading)\r\n  }\r\n\r\n  load (next?: Function): void {\r\n    if (this.state > State.loading) {\r\n      return\r\n    }\r\n    if (this.cache.has(this.src)) {\r\n      this.state = State.loaded\r\n      this.render(this.src)\r\n      return\r\n    }\r\n    this.renderSrc(next)\r\n  }\r\n\r\n  isInView (): boolean {\r\n    const rect = this.el.getBoundingClientRect()\r\n    return rect.top < window.innerHeight && rect.left < window.innerWidth\r\n  }\r\n\r\n  update (src: string): void {\r\n    const currentSrc = this.src\r\n    if (src !== currentSrc) {\r\n      this.src = src\r\n      this.state = State.loading\r\n      this.load()\r\n    }\r\n  }\r\n\r\n  private renderSrc (next?: Function): void {\r\n    loadImage(this.src).then(() => {\r\n      this.state = State.loaded\r\n      this.render(this.src)\r\n      this.cache.add(this.src)\r\n      next && next()\r\n    }).catch((e) => {\r\n      this.state = State.error\r\n      this.render(this.error)\r\n      warn(`load failed with src image(${this.src}) and the error msg is ${e.message}`)\r\n      next && next()\r\n    })\r\n  }\r\n\r\n  private render (src: string): void {\r\n    this.el.setAttribute('src', src)\r\n  }\r\n}\r\n","export function throttle (fn: Function, delay: number): Function {\r\n  let timeout = 0\r\n  let lastRun = 0\r\n  return function (this: void) {\r\n    if (timeout) {\r\n      return\r\n    }\r\n    const elapsed = Date.now() - lastRun\r\n    const context = this\r\n    const args = arguments\r\n    const runCallback = function () {\r\n      lastRun = Date.now()\r\n      timeout = 0\r\n      fn.apply(context, args)\r\n    }\r\n    if (elapsed >= delay) {\r\n      runCallback()\r\n    } else {\r\n      timeout = window.setTimeout(runCallback, delay)\r\n    }\r\n  }\r\n}\r\n","import { DirectiveBinding } from 'vue'\r\nimport { LazyOptions, State, Target } from '../types'\r\nimport { hasIntersectionObserver, scrollParent } from '../helpers/dom'\r\nimport ImageManager from './imageManager'\r\nimport { throttle } from '../helpers/util'\r\n\r\nconst DEFAULT_URL = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7'\r\n\r\nconst events = ['scroll', 'wheel', 'mousewheel', 'resize', 'animationend', 'transitionend', 'touchmove', 'transitioncancel']\r\n\r\nconst THROTTLE_DELAY = 300\r\n\r\nexport default class Lazy {\r\n  error: string\r\n  loading: string\r\n  cache: Set<string>\r\n  managerQueue: ImageManager[]\r\n  observer?: IntersectionObserver\r\n  targetQueue?: Target[]\r\n  throttleLazyHandler: Function\r\n\r\n  constructor (options: LazyOptions) {\r\n    this.error = options.error || DEFAULT_URL\r\n    this.loading = options.loading || DEFAULT_URL\r\n\r\n    this.cache = new Set()\r\n    this.managerQueue = []\r\n    this.throttleLazyHandler = throttle(this.lazyHandler.bind(this), THROTTLE_DELAY)\r\n\r\n    this.init()\r\n  }\r\n\r\n  add (el: HTMLElement, binding: DirectiveBinding): void {\r\n    const src = binding.value\r\n    const parent = scrollParent(el)\r\n\r\n    const manager = new ImageManager({\r\n      el,\r\n      parent,\r\n      src,\r\n      error: this.error,\r\n      loading: binding.modifiers.noloading ? DEFAULT_URL : this.loading,\r\n      cache: this.cache\r\n    })\r\n\r\n    this.managerQueue.push(manager)\r\n\r\n    if (hasIntersectionObserver) {\r\n      this.observer!.observe(el)\r\n    } else {\r\n      this.addListenerTarget(parent)\r\n      this.addListenerTarget(window)\r\n      this.throttleLazyHandler()\r\n    }\r\n  }\r\n\r\n  update (el: HTMLElement, binding: DirectiveBinding): void {\r\n    const src = binding.value\r\n    const manager = this.managerQueue.find((manager) => {\r\n      return manager.el === el\r\n    })\r\n    if (manager) {\r\n      manager.update(src)\r\n    }\r\n  }\r\n\r\n  remove (el: HTMLElement): void {\r\n    const manager = this.managerQueue.find((manager) => {\r\n      return manager.el === el\r\n    })\r\n    if (manager) {\r\n      this.removeManager(manager)\r\n    }\r\n  }\r\n\r\n  private init (): void {\r\n    if (hasIntersectionObserver) {\r\n      this.initIntersectionObserver()\r\n    } else {\r\n      this.targetQueue = []\r\n    }\r\n  }\r\n\r\n  private initIntersectionObserver (): void {\r\n    this.observer = new IntersectionObserver((entries) => {\r\n      entries.forEach((entry) => {\r\n        if (entry.isIntersecting) {\r\n          const manager = this.managerQueue.find((manager) => {\r\n            return manager.el === entry.target\r\n          })\r\n          if (manager) {\r\n            if (manager.state === State.loaded) {\r\n              this.removeManager(manager)\r\n              return\r\n            }\r\n            manager.load()\r\n          }\r\n        }\r\n      })\r\n    }, {\r\n      rootMargin: '0px',\r\n      threshold: 0\r\n    })\r\n  }\r\n\r\n  private addListenerTarget (el: HTMLElement | Window): void {\r\n    let target = this.targetQueue!.find((target) => {\r\n      return target.el === el\r\n    })\r\n\r\n    if (!target) {\r\n      target = {\r\n        el,\r\n        ref: 1\r\n      }\r\n      this.targetQueue!.push(target)\r\n      this.addListener(el)\r\n    } else {\r\n      target.ref++\r\n    }\r\n  }\r\n\r\n  private removeListenerTarget (el: HTMLElement | Window): void {\r\n    this.targetQueue!.some((target, index) => {\r\n      if (el === target.el) {\r\n        target.ref--\r\n        if (!target.ref) {\r\n          this.removeListener(el)\r\n          this.targetQueue!.splice(index, 1)\r\n        }\r\n        return true\r\n      }\r\n      return false\r\n    })\r\n  }\r\n\r\n  private addListener (el: HTMLElement | Window): void {\r\n    events.forEach((event) => {\r\n      el.addEventListener(event, this.throttleLazyHandler as EventListenerOrEventListenerObject, {\r\n        passive: true,\r\n        capture: false\r\n      })\r\n    })\r\n  }\r\n\r\n  private removeListener (el: HTMLElement | Window): void {\r\n    events.forEach((event) => {\r\n      el.removeEventListener(event, this.throttleLazyHandler as EventListenerOrEventListenerObject)\r\n    })\r\n  }\r\n\r\n  private lazyHandler (e: Event): void {\r\n    for (let i = this.managerQueue.length - 1; i >= 0; i--) {\r\n      const manager = this.managerQueue[i]\r\n      if (manager.isInView()) {\r\n        if (manager.state === State.loaded) {\r\n          this.removeManager(manager)\r\n          return\r\n        }\r\n        manager.load()\r\n      }\r\n    }\r\n  }\r\n\r\n  private removeManager (manager: ImageManager): void {\r\n    const index = this.managerQueue.indexOf(manager)\r\n    if (index > -1) {\r\n      this.managerQueue.splice(index, 1)\r\n    }\r\n    if (this.observer) {\r\n      this.observer.unobserve(manager.el)\r\n    } else {\r\n      this.removeListenerTarget(manager.parent)\r\n      this.removeListenerTarget(window)\r\n    }\r\n  }\r\n}\r\n","import { App } from 'vue'\r\nimport { LazyOptions } from './types'\r\nimport Lazy from './core/lazy'\r\n\r\nconst lazyPlugin = {\r\n  install (app: App, options: LazyOptions) {\r\n    const lazy = new Lazy(options)\r\n\r\n    app.directive('lazy', {\r\n      mounted: lazy.add.bind(lazy),\r\n      updated: lazy.update.bind(lazy),\r\n      unmounted: lazy.update.bind(lazy)\r\n    })\r\n  }\r\n}\r\n\r\nexport default lazyPlugin\r\n"],"names":[],"mappings":"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"}